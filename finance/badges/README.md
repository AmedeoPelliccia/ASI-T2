# Teknia Token Badges

This directory contains **generated badge artifacts** for the Teknia Token (TT) v3.14 system. These files are created by the `badge` command in `tools/tek_tokens.py` and should **not** be committed to git.

## Contents

This directory currently contains:

* **`tt-balance.json`** — Shields.io endpoint JSON with treasury balance (path configured in `teknia.tokenomics.json`)

The `badge` command can generate:

* **SVG badge files** — Configurable output path (default: `badges/tt-verified.svg` at repo root)
* **JSON endpoint files** — Path specified in `badges.path` config (currently `finance/badges/tt-balance.json`)

## Purpose

Badges provide visual verification of the token system state:

* **Treasury Balance** — Shows current TT holdings in the TREASURY account
* **Verification Status** — Confirms ledger integrity and policy hash validation
* **Integration** — JSON endpoint enables Shields.io dynamic badges in documentation

## Generation

Badges are automatically generated by the `badge` command:

```bash
# Generate badge with default output (creates badges/tt-verified.svg at repo root)
python tools/tek_tokens.py badge

# Generate badge in finance/badges directory  
python tools/tek_tokens.py badge --out finance/badges/tt-verified.svg

# Generate badge with custom name
python tools/tek_tokens.py badge --out finance/badges/my-custom-badge.svg

# Badge generation includes:
# 1. SVG badge file (always created at specified path)
# 2. Shields.io JSON endpoint (if enabled in config, goes to configured path)
```

**Note:** The default output path is `badges/tt-verified.svg` (repo root). The JSON endpoint path is configured separately in `teknia.tokenomics.json` under `badges.path`.

## Configuration

Badge settings are defined in `finance/teknia.tokenomics.json`:

```json
{
  "badges": {
    "enabled": true,
    "path": "finance/badges/tt-balance.json",
    "label": "Teknia TT",
    "color": "blue"
  }
}
```

### Configuration Options

* **`enabled`** — Enable/disable Shields.io JSON endpoint generation
* **`path`** — Output path for the JSON endpoint file (relative to repo root)
* **`label`** — Badge label text (e.g., "Teknia TT")
* **`color`** — Badge color (Shields.io color names or hex codes)

## Shields.io Integration

The JSON endpoint follows the [Shields.io endpoint schema](https://shields.io/endpoint):

```json
{
  "schemaVersion": 1,
  "label": "TeknIA TT",
  "message": "10000.000 TT",
  "color": "blue"
}
```

**Example** from current repository (actual content of `tt-balance.json`).

Use in documentation:

```markdown
![Teknia TT Balance](https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/YOUR-USERNAME/YOUR-REPO/main/finance/badges/tt-balance.json)
```

Replace `YOUR-USERNAME/YOUR-REPO` with your actual GitHub repository path (e.g., `AmedeoPelliccia/ASI-T2`).

## Verification

Badge values are derived from verified ledger data:

1. **Ledger loaded** — Current account balances read from `finance/ledger.json` (generated file)
2. **Treasury queried** — Balance of `TREASURY` account (or configured treasury)
3. **Conversion applied** — Balance in `deg` converted to `TT` using configured `deg_per_tt` ratio
4. **Output formatted** — Badge message includes balance with decimal precision

The `badge` command does **not** mutate the ledger—it only reads current state.

## CI/CD Integration

Badges can be automatically regenerated and published in CI workflows:

```yaml
- name: Generate token badges
  run: python tools/tek_tokens.py badge

- name: Publish to GitHub Pages
  run: |
    mkdir -p _site/badges
    # Copy badge artifacts if they exist
    if ls finance/badges/*.json 1> /dev/null 2>&1; then
      cp finance/badges/*.json _site/badges/
    fi
    # Deploy _site/ via GitHub Pages action
```

**Note:** Badge artifacts should be published via GitHub Pages or similar deployment mechanisms, not committed directly to the repository.

## File Lifecycle

* **Generated** — Created by `tek_tokens.py badge` command
* **Updated** — Reflects current ledger state when regenerated
* **Ignored** — Listed in `.gitignore` (if configured as generated artifacts)
* **Distributed** — Can be published via GitHub Pages or raw.githubusercontent.com

## Related Documentation

* **[Token System Overview](../README.md)** — Teknia Token v3.14 documentation
* **[CLI Tool](../../tools/README.md)** — `tek_tokens.py` command reference
* **[Token Economics](../teknia.tokenomics.json)** — Policy and configuration
* **[Verification](../../docs/TOKENS.md)** — Ledger verification and integrity

---

**Version:** 3.14 (π-tier hybrid tokenomics)  
**Generator:** `tools/tek_tokens.py badge`
